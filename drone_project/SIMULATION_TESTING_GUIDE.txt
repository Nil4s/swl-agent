================================================================================
DRONE DESIGN SIMULATION & EFFICIENCY TESTING GUIDE
================================================================================
Test and optimize your drone parts BEFORE building!
Simulate aerodynamics, thrust, power consumption, and flight performance
================================================================================

TABLE OF CONTENTS
--------------------------------------------------------------------------------
1. CFD Simulation (Computational Fluid Dynamics)
2. Thrust Testing & Measurement
3. Power Efficiency Analysis
4. Flight Dynamics Simulation
5. Structural Analysis (FEA)
6. Motor & Propeller Matching
7. Battery Life Prediction
8. Real-World Bench Testing
9. Software Tools Overview
10. Step-by-Step Simulation Workflow

================================================================================
1. CFD SIMULATION (Computational Fluid Dynamics)
================================================================================

WHAT IS CFD?
--------------------------------------------------------------------------------
CFD simulates airflow around your impeller/propeller designs:
  - Visualize air velocity, pressure, turbulence
  - Calculate thrust, drag, efficiency
  - Optimize blade shape, angle, count
  - Predict noise levels
  - Compare design variants

WHY SIMULATE?
  ‚úì Save money (no wasted 3D prints)
  ‚úì Optimize performance (10-30% efficiency gains)
  ‚úì Identify problems (stall, turbulence, vibration)
  ‚úì Compare designs objectively (data-driven decisions)

FREE CFD SOFTWARE OPTIONS
--------------------------------------------------------------------------------

OPTION A: SimScale (Cloud-Based - EASIEST)
  Website: https://www.simscale.com/
  Cost: FREE for public projects
  
  Pros:
    + No installation (runs in browser)
    + Pre-configured templates
    + Community library (examples)
    + Automatic meshing
    + Good for beginners
  
  Cons:
    - Requires account
    - Public projects only (free tier)
    - Limited compute hours (~3000/year free)
  
  Best For: Quick tests, learning CFD, non-sensitive designs

OPTION B: OpenFOAM (Open Source - POWERFUL)
  Website: https://www.openfoam.com/
  Cost: FREE (fully open source)
  
  Pros:
    + Industry-standard solver
    + Unlimited simulations
    + Advanced physics (turbulence, multiphase)
    + Scriptable (automation)
  
  Cons:
    - Linux only (or WSL on Windows)
    - Steep learning curve
    - Command-line based
    - Manual mesh generation
  
  Best For: Advanced users, research, professional results

OPTION C: ANSYS Student (Free Academic License)
  Website: https://www.ansys.com/academic/students
  Cost: FREE for students
  
  Pros:
    + Professional-grade software
    + Full GUI (user-friendly)
    + Excellent meshing tools
    + Built-in optimization
  
  Cons:
    - Requires student/academic email
    - Windows only
    - Large download (10+ GB)
    - Node/element limits (free version)
  
  Best For: Students, academic projects

OPTION D: FreeCAD + CfdOF Plugin (Open Source CAD)
  Website: https://www.freecadweb.org/
  Cost: FREE
  
  Pros:
    + Integrated CAD + CFD
    + Cross-platform (Windows, Mac, Linux)
    + Visual mesh editing
    + Uses OpenFOAM backend
  
  Cons:
    - Less polished than commercial tools
    - Smaller community
    - Some manual setup
  
  Best For: DIY enthusiasts, budget builds

RECOMMENDED: Start with SimScale, upgrade to OpenFOAM later

CFD SIMULATION WORKFLOW
--------------------------------------------------------------------------------

STEP 1: Prepare CAD Model
  - Export your .scad file to .stl or .step
  - Clean up geometry (close holes, fix normals)
  - Create flow domain (box around part)
  - Define inlet, outlet, walls

STEP 2: Mesh Generation
  - Surface mesh: Triangles on part surface
  - Volume mesh: Tetrahedrons in flow domain
  - Refinement: Finer mesh near blades (boundary layer)
  - Target: 500K-5M cells (depending on complexity)

STEP 3: Physics Setup
  - Solver: k-omega SST (turbulence model)
  - Fluid: Air (1.225 kg/m¬≥, 1.8e-5 Pa¬∑s viscosity)
  - Boundary conditions:
    * Inlet: Velocity (0 m/s initially)
    * Outlet: Pressure (atmospheric)
    * Blades: Rotating wall (RPM)
    * Outer: Slip wall
  - Rotation: MRF (Moving Reference Frame) or Sliding Mesh

STEP 4: Run Simulation
  - Iterations: 500-2000 (until convergence)
  - Residuals: Watch convergence plot
  - Time: 1-8 hours (depending on mesh size and hardware)

STEP 5: Post-Processing
  - Visualize: Velocity contours, pressure fields
  - Calculate: Thrust (integrate pressure on blades)
  - Analyze: Flow separation, stall, turbulence
  - Export: Data, images, videos

STEP 6: Optimize & Iterate
  - Tweak design (blade angle, chord, twist)
  - Re-run simulation
  - Compare results
  - Repeat until optimal

WHAT TO SIMULATE
--------------------------------------------------------------------------------

1. Main Impeller (Bladeless or Bladed)
   - Test RPM: 5000, 7000, 9000 RPM
   - Measure: Thrust (grams), Power (watts)
   - Goal: Max thrust/watt ratio

2. Peripheral Impeller Housings
   - Test: Duct efficiency, inlet losses
   - Measure: Mass flow rate, pressure rise
   - Goal: Smooth flow, minimal turbulence

3. Gimbal Airfoil (if applicable)
   - Test: Drag at different angles
   - Measure: Lift and drag coefficients
   - Goal: Low drag for gimbal movement

4. Full Assembly
   - Test: Complete drone in hover
   - Measure: Total power, downwash velocity
   - Goal: Validate overall design

EXPECTED RESULTS
--------------------------------------------------------------------------------
Bladeless Impeller:
  - Thrust: 350-450g @ 7000 RPM
  - Efficiency: 5-7 grams/watt
  - Flow velocity: 15-20 m/s at outlet

AI-Optimized Bladed Impeller:
  - Thrust: 550-700g @ 7000 RPM
  - Efficiency: 18-22 grams/watt
  - Flow velocity: 20-30 m/s

Hybrid Design:
  - Thrust: 650-800g @ 7000 RPM
  - Efficiency: 15-18 grams/watt
  - Noise reduction: 5-8 dB vs. open blades

================================================================================
2. THRUST TESTING & MEASUREMENT
================================================================================

WHY TEST THRUST?
  - Validate CFD simulations
  - Measure actual performance
  - Compare different designs
  - Determine hover throttle

DIY THRUST STAND SETUP
--------------------------------------------------------------------------------

MATERIALS NEEDED:
  [1x] Digital kitchen scale (¬±1g accuracy, 5kg capacity)
       Cost: $15-25, Amazon/Walmart
  [1x] Motor mount (3D printed or aluminum L-bracket)
  [1x] ESC + Battery (flight-ready setup)
  [1x] Radio transmitter/receiver OR Arduino PWM control
  [1x] Optional: Tachometer (RPM measurement)
       Laser non-contact type, $15-30
  [1x] Optional: Power meter (voltage/current/wattage)
       Wattmeter module, $10-20

ASSEMBLY:
  1. Mount motor vertically on scale (impeller facing up)
  2. Secure scale to table (prevent sliding)
  3. Tare scale to zero (with motor + mount weight)
  4. Connect ESC, receiver, battery
  5. Safety: Use propeller guard or test in box

TESTING PROCEDURE:
  1. Arm motor at 0% throttle
  2. Slowly increase throttle: 20%, 40%, 60%, 80%, 100%
  3. At each throttle:
     - Wait 5 seconds for stabilization
     - Record thrust (grams on scale)
     - Record RPM (if tachometer available)
     - Record power (watts, if power meter)
  4. Plot thrust curve: Thrust vs. Throttle %

SAFETY:
  ‚ö† Wear safety glasses (blade failure = shrapnel)
  ‚ö† Secure setup (motor can vibrate off scale)
  ‚ö† Keep hands away from spinning parts
  ‚ö† Test outdoors or in enclosure (if loud)

THRUST DATA ANALYSIS
--------------------------------------------------------------------------------

Efficiency Calculation:
  Efficiency (g/W) = Thrust (grams) / Power (watts)
  
  Example:
    Thrust = 600g @ 80% throttle
    Power = 30W
    Efficiency = 600 / 30 = 20 g/W (excellent!)

Thrust-to-Weight Ratio:
  TWR = Total Thrust / Drone Weight
  
  Example:
    4x Peripheral motors: 200g each = 800g total
    1x Main impeller: 400g
    Total thrust: 1200g
    Drone weight: 650g
    TWR = 1200 / 650 = 1.85:1 (good for stable flight)

Hover Throttle:
  Hover % = (Weight / Max Thrust) √ó 100%
  
  Example:
    Weight: 650g
    Max thrust: 1200g
    Hover = (650/1200) √ó 100% = 54%
    
  Ideal hover: 40-60% (leaves headroom for control)

DATA TO COLLECT
--------------------------------------------------------------------------------
| Throttle % | Thrust (g) | RPM   | Current (A) | Voltage (V) | Power (W) | Efficiency (g/W) |
|------------|------------|-------|-------------|-------------|-----------|------------------|
| 0%         | 0          | 0     | 0.5         | 14.8        | 0         | N/A              |
| 20%        | 120        | 3500  | 2.5         | 14.7        | 36.8      | 3.3              |
| 40%        | 280        | 5200  | 5.0         | 14.5        | 72.5      | 3.9              |
| 60%        | 450        | 6800  | 8.5         | 14.2        | 120.7     | 3.7              |
| 80%        | 600        | 8200  | 13.0        | 13.8        | 179.4     | 3.3              |
| 100%       | 720        | 9500  | 18.5        | 13.2        | 244.2     | 2.9              |

Observations:
  - Peak efficiency at 40-60% throttle (typical)
  - Diminishing returns above 80% (exponential power)
  - Design for efficient hover (40-60% range)

================================================================================
3. POWER EFFICIENCY ANALYSIS
================================================================================

TOTAL SYSTEM EFFICIENCY
--------------------------------------------------------------------------------

Energy Flow Chain:
  Battery ‚Üí ESC ‚Üí Motor ‚Üí Impeller ‚Üí Thrust
  100%      95%    85%     70%       ?% effective

Losses:
  1. ESC: 5-10% (heat dissipation, switching losses)
  2. Motor: 10-20% (copper losses, iron losses, friction)
  3. Impeller: 20-40% (aerodynamic losses, induced drag, tip vortex)

Overall Efficiency:
  Total = Battery ‚Üí Thrust = 50-70% (good drone)
  
  Example:
    Battery power: 200W
    Effective thrust power: 120W
    Efficiency: 60%

PROPULSIVE EFFICIENCY
--------------------------------------------------------------------------------

Formula (Momentum Theory):
  Œ∑_prop = Useful Power / Input Power
  
  Useful Power = Thrust √ó Velocity
  Input Power = Motor Electrical Power
  
  For hovering:
    Œ∑_prop = (Thrust √ó ‚àö(Thrust/(2√óœÅ√óA))) / Power
  
  Where:
    œÅ = air density (1.225 kg/m¬≥)
    A = disk area (œÄ √ó radius¬≤)

Disk Loading:
  Loading = Thrust / Disk Area (g/cm¬≤)
  
  Lower disk loading = Higher efficiency (but larger size)
  
  Example:
    Main impeller: 90mm diameter
    Area = œÄ √ó (4.5cm)¬≤ = 63.6 cm¬≤
    Thrust = 400g
    Loading = 400 / 63.6 = 6.3 g/cm¬≤
  
  Typical ranges:
    - Small racing quads: 15-25 g/cm¬≤ (aggressive, inefficient)
    - Photography drones: 5-10 g/cm¬≤ (efficient, smooth)
    - Helicopters: 2-5 g/cm¬≤ (very efficient)

FIGURE OF MERIT (FOM)
--------------------------------------------------------------------------------
Used in helicopter industry to rate rotor efficiency:

  FOM = (Thrust^1.5 / ‚àö(2√óœÅ√óA)) / Power
  
  Ideal FOM: 1.0 (theoretical maximum)
  Real FOM: 0.6-0.8 (excellent propeller)
          : 0.4-0.6 (typical multicopter prop)
          : 0.2-0.4 (bladeless designs)

Calculate your FOM and compare to benchmarks!

MOTOR EFFICIENCY MAPPING
--------------------------------------------------------------------------------

Motors have efficiency curves (varies with RPM and load):

  Peak efficiency: 80-90% (sweet spot)
  Low throttle: 60-70% (underloaded)
  High throttle: 70-80% (overloaded, heat)

Matching Motor to Impeller:
  1. Plot motor efficiency curve (from datasheet or dyno)
  2. Plot impeller power requirement vs. RPM
  3. Find overlap: Where impeller needs power = motor efficient zone
  4. Choose motor KV accordingly

Example:
  Impeller needs 25W @ 7000 RPM (hover)
  Motor peak efficiency: 85% @ 6000-8000 RPM
  ‚úì Good match!

================================================================================
4. FLIGHT DYNAMICS SIMULATION
================================================================================

SIMULATE FULL DRONE FLIGHT
--------------------------------------------------------------------------------

SOFTWARE OPTIONS:

OPTION A: FlightGear (Open Source Flight Sim)
  Website: https://www.flightgear.org/
  Cost: FREE
  
  Features:
    - Full flight dynamics engine
    - Physics-based simulation
    - Custom aircraft models (FDM files)
    - Real-world scenarios
  
  Use Case: Test flight behavior, control tuning

OPTION B: Gazebo + ArduPilot SITL (Software-In-The-Loop)
  Website: http://gazebosim.org/
  Cost: FREE
  
  Features:
    - Robot simulation (ROS compatible)
    - ArduPilot/PX4 firmware integration
    - Test autonomous missions
    - Sensor simulation (GPS, IMU, camera)
  
  Use Case: Autonomous flight testing, PID tuning

OPTION C: MATLAB/Simulink (Academic)
  Website: https://www.mathworks.com/academia/student_version.html
  Cost: $49-99 (student version)
  
  Features:
    - Custom dynamics modeling
    - Control system design
    - State-space simulation
    - Professional results
  
  Use Case: Research, advanced control algorithms

OPTION D: Python + PyDy / PyBullet (Custom Scripts)
  Cost: FREE
  
  Features:
    - Write your own physics
    - Lightweight, flexible
    - Great for learning
  
  Use Case: Educational, simple models

RECOMMENDED: Gazebo + ArduPilot SITL (most realistic)

WHAT TO SIMULATE
--------------------------------------------------------------------------------

1. Hover Stability
   - Add wind disturbance (5-10 m/s gusts)
   - Test PID response
   - Measure: Drift, oscillations, recovery time

2. Autonomous Missions
   - GPS waypoint navigation
   - Return-to-home accuracy
   - Obstacle avoidance response

3. Gimbal Control
   - Tilt response time
   - Coupling effects (gimbal tilt ‚Üí roll/pitch)
   - Vectored thrust efficiency

4. Sensor Fusion
   - GPS + IMU + barometer fusion
   - Optical flow indoor navigation
   - Failover scenarios (GPS loss)

5. Battery Discharge
   - Flight time prediction
   - Low battery behavior (RTH trigger)
   - Voltage sag under load

FLIGHT DYNAMICS MODEL
--------------------------------------------------------------------------------

Equations of Motion (6 DOF):
  Forces: F = m √ó a
  Torques: œÑ = I √ó Œ±
  
  State Vector: [x, y, z, vx, vy, vz, œÜ, Œ∏, œà, p, q, r]
    Position: x, y, z
    Velocity: vx, vy, vz
    Attitude: œÜ (roll), Œ∏ (pitch), œà (yaw)
    Rates: p, q, r (angular velocities)

Motor Model:
  Thrust_i = k_t √ó œâ_i¬≤ (œâ = motor speed)
  Torque_i = k_q √ó œâ_i¬≤
  
  Where k_t, k_q are motor constants (from thrust test)

Control Inputs:
  - Throttle: Main impeller + 4x peripheral motors
  - Roll: Differential peripheral motor thrust (left vs. right)
  - Pitch: Differential thrust (front vs. rear)
  - Yaw: Gimbal tilt OR differential torque

Aerodynamic Drag:
  Drag = 0.5 √ó œÅ √ó v¬≤ √ó Cd √ó A
  
  Estimate Cd (drag coefficient):
    - Streamlined: Cd = 0.3-0.5
    - Boxy frame: Cd = 0.8-1.2
    - With cameras/payload: Cd = 1.0-1.5

PID Controllers:
  - Attitude (fast): P=4, I=0.05, D=0.2 (typical starting values)
  - Position (slow): P=1, I=0.01, D=0.5
  - Auto-tune: Use SITL + Gazebo to optimize

================================================================================
5. STRUCTURAL ANALYSIS (FEA)
================================================================================

FINITE ELEMENT ANALYSIS (FEA)
--------------------------------------------------------------------------------

What is FEA?
  - Simulates structural stresses and deformations
  - Tests part strength before printing
  - Identifies weak points (stress concentrations)
  - Optimizes material usage (topology optimization)

FREE FEA SOFTWARE
--------------------------------------------------------------------------------

OPTION A: FreeCAD FEM Workbench
  Cost: FREE
  Features: Integrated with CAD, CalculiX solver

OPTION B: ANSYS Student
  Cost: FREE for students
  Features: Professional-grade, excellent GUI

OPTION C: Fusion 360 (Free Hobby License)
  Cost: FREE for personal use
  Features: Cloud-based, easy to use

WHAT TO ANALYZE
--------------------------------------------------------------------------------

1. Gimbal Ring
   - Load: Servo forces (2-5 N at gear teeth)
   - Constraint: Fixed at motor mount
   - Check: Max stress < 30 MPa (PLA yield strength)
   - Result: Deformation < 0.5mm (for smooth rotation)

2. Motor Mounts
   - Load: Motor thrust (5-20 N vertical)
   - Vibration: Resonance frequency > 200 Hz
   - Check: Fatigue life (1000+ hours)

3. Frame Arms
   - Load: Motor weight + aerodynamic forces
   - Constraint: Fixed at center hub
   - Check: Deflection < 5mm at tip

4. Servo Mounts
   - Load: Servo torque (2 kg¬∑cm = 0.2 N¬∑m)
   - Check: Mounting screw holes (stress concentration)

MATERIAL PROPERTIES (3D Printing)
--------------------------------------------------------------------------------
| Material | Tensile Strength | Yield Strength | Young's Modulus | Density  |
|----------|------------------|----------------|-----------------|----------|
| PLA      | 50 MPa           | 30 MPa         | 3500 MPa        | 1.24 g/cm¬≥ |
| PETG     | 53 MPa           | 35 MPa         | 2000 MPa        | 1.27 g/cm¬≥ |
| ABS      | 40 MPa           | 25 MPa         | 2300 MPa        | 1.05 g/cm¬≥ |
| Nylon    | 75 MPa           | 45 MPa         | 1600 MPa        | 1.14 g/cm¬≥ |
| TPU      | 26 MPa           | 15 MPa         | 100 MPa         | 1.21 g/cm¬≥ |

Safety Factor:
  SF = Yield Strength / Max Stress
  
  Target: SF > 2.0 (conservative design)
  
  Example:
    Max stress in gimbal: 12 MPa (from FEA)
    PLA yield: 30 MPa
    SF = 30 / 12 = 2.5 ‚úì Safe!

================================================================================
6. MOTOR & PROPELLER MATCHING
================================================================================

WHY MATCHING MATTERS
--------------------------------------------------------------------------------
Wrong match:
  - Motor overheats (burned windings)
  - Low efficiency (wasted battery)
  - Poor performance (weak thrust)

Right match:
  - Cool motor operation (<80¬∞C)
  - Peak efficiency (18-22 g/W)
  - Max flight time

MOTOR SPECIFICATIONS
--------------------------------------------------------------------------------

KV Rating:
  KV = RPM per volt (no load)
  
  Example: 2300 KV motor @ 11.1V
    RPM = 2300 √ó 11.1 = 25,530 RPM (no load)
    Actual: ~18,000 RPM under load (prop drag)

Current Rating:
  - Max continuous: 15A (what motor can sustain)
  - Max burst: 20A (short duration, <10 sec)
  - Choose ESC with 20-30% headroom

Thrust Rating:
  Usually specified with a prop size:
    "600g thrust with 5-inch prop @ 11.1V"

PROPELLER / IMPELLER SPECIFICATIONS
--------------------------------------------------------------------------------

Diameter:
  Larger = More thrust, lower RPM, higher efficiency
  Smaller = Less thrust, higher RPM, lower efficiency

Pitch:
  Pitch = Distance traveled per revolution
  
  Low pitch (3-4 inch): Fast acceleration, low top speed
  High pitch (5-6 inch): Slow acceleration, high top speed

Blade Count:
  2 blades: Most efficient, noisiest
  3 blades: Good balance (our design uses 3)
  4+ blades: Smooth, quiet, less efficient

MATCHING PROCEDURE
--------------------------------------------------------------------------------

STEP 1: Determine Required Thrust
  Total weight = 650g
  TWR target = 2:1
  Required thrust = 650 √ó 2 = 1300g total
  
  Per motor (5 motors):
    Main: 400-500g
    Peripheral (each): 200-250g

STEP 2: Calculate Disk Loading
  Main impeller: 90mm diameter
    Area = œÄ √ó 4.5¬≤ = 63.6 cm¬≤
    Thrust = 450g
    Loading = 7.1 g/cm¬≤ (efficient range)

STEP 3: Select Motor KV
  Target RPM for impeller: 7000-9000 RPM
  Battery voltage: 11.1V (3S) to 14.8V (4S)
  
  KV = RPM / Voltage
  KV = 7500 / 11.1 = 676 KV (too low, not available)
  OR use gearing / direct drive 2300 KV with throttle limit
  
  Practical: 2300 KV @ 11.1V = 25,530 RPM (no load)
    Under load: ~8000 RPM @ 60% throttle ‚úì

STEP 4: Verify Power Requirements
  Motor datasheet: 2204 2300KV, max 180W
  Our impeller: ~30W @ hover, ~60W @ max
  ‚úì Motor can handle it

STEP 5: Thermal Check
  Power dissipated as heat: 10-20% of input
  Heat = 60W √ó 0.15 = 9W
  Motor temp rise: ~40¬∞C (estimate)
  Ambient 25¬∞C + 40¬∞C = 65¬∞C (safe, <80¬∞C limit)

PROPELLER SELECTION TOOL
--------------------------------------------------------------------------------

eCalc (Online Calculator):
  Website: https://www.ecalc.ch/
  Cost: FREE for basic, $10-30/year premium
  
  Features:
    - Database of motors, props, batteries
    - Automatic matching
    - Flight time prediction
    - Efficiency analysis
  
  Use: Enter your motor, prop size, battery ‚Üí Get performance

DriveCal (Multicopter Specific):
  Website: https://www.drivecalc.de/
  Cost: FREE
  
  Similar to eCalc but focused on multirotors

================================================================================
7. BATTERY LIFE PREDICTION
================================================================================

FLIGHT TIME CALCULATION
--------------------------------------------------------------------------------

Simple Formula:
  Flight Time (min) = (Battery Capacity (mAh) √ó Discharge % √ó 60) / Average Current (mA)
  
  Example:
    Battery: 4S 2000mAh
    Discharge: 80% (safe for LiPo)
    Average current: 20A (20,000mA) in hover
    
    Time = (2000 √ó 0.8 √ó 60) / 20,000
         = 4.8 minutes
  
  Add 20% for throttle variation, wind: 4.8 √ó 1.2 = 5.8 min

Advanced Formula (accounts for voltage sag):
  Energy = Battery Capacity (Ah) √ó Average Voltage (V)
  Power = Thrust (kg) √ó 9.81 √ó Hover Efficiency Factor / Œ∑_prop
  
  Time = Energy / Power

C-RATING IMPACT
--------------------------------------------------------------------------------

C-Rating = Max safe discharge rate

Example:
  2000mAh 25C battery
  Max current = 2000mA √ó 25 = 50A (safe continuous)

Voltage Sag:
  Higher current ‚Üí Lower voltage ‚Üí Less power
  
  At 20A: 14.8V (nominal)
  At 40A: 13.5V (sag)
  
  Power loss = (14.8 - 13.5) / 14.8 = 8.8%

Choose battery with C-rating 2x your max draw (headroom)

BATTERY SELECTION OPTIMIZATION
--------------------------------------------------------------------------------

Tradeoff: Capacity vs. Weight

Option A: 4S 1500mAh, 160g
  Flight time: 6 min
  
Option B: 4S 2500mAh, 270g
  Flight time: 9 min (not linear due to extra weight!)
  
Optimal: Battery = 30-40% of total weight

Sweet Spot Calculator:
  1. Test hover power (from thrust stand): 120W
  2. Calculate current: 120W / 14.8V = 8.1A
  3. Battery capacity for 10 min: 8.1A √ó (10/60) √ó 1.25 = 1.7 Ah
  4. Choose: 2000mAh (close match)

================================================================================
8. REAL-WORLD BENCH TESTING
================================================================================

TESTING CHECKLIST (BEFORE FIRST FLIGHT)
--------------------------------------------------------------------------------

‚ñ° STEP 1: Motor Direction Test
  - All motors spin correct direction
  - Main impeller: Pushes air DOWN
  - Peripheral: Check rotation (CW or CCW per design)
  - Test: Low throttle (10%), props OFF

‚ñ° STEP 2: ESC Calibration
  - All ESCs same throttle range
  - No beeping or errors
  - Smooth throttle response
  - Test: Full throttle range, props OFF

‚ñ° STEP 3: Servo Test
  - Gimbal servos move smoothly
  - No binding or grinding
  - Correct direction (stick input ‚Üí servo direction)
  - Test: Manual RC control

‚ñ° STEP 4: Sensor Calibration
  - IMU: Level on flat surface, gyro bias
  - Magnetometer: Figure-8 calibration
  - GPS: Solid lock (10+ satellites)
  - Test: Check in FC configurator

‚ñ° STEP 5: Radio Range Test
  - Walk 50m, 100m with transmitter
  - Check signal strength (RSSI)
  - Test failsafe (turn off TX, drone should disarm)

‚ñ° STEP 6: Vibration Test
  - Mount FC/IMU on drone
  - Spin motors to hover throttle
  - Check vibration levels (FC logging)
  - Target: <20mg RMS
  - Add dampening if needed

‚ñ° STEP 7: Thrust Margin Test
  - Full throttle thrust test (on stand)
  - Verify: Total thrust > 1.5√ó weight minimum
  - Measure: Actual hover throttle % (should be 40-60%)

‚ñ° STEP 8: Battery Discharge Test
  - Hover on bench (tethered or thrust stand)
  - Run until low battery warning
  - Measure: Actual flight time
  - Compare: To calculated prediction

‚ñ° STEP 9: Thermal Test
  - Hover for 3 minutes
  - Check motor temps (IR thermometer)
  - Target: <80¬∞C
  - Check ESCs, battery (should be warm, not hot)

‚ñ° STEP 10: PID Tuning (Initial)
  - Start with conservative PIDs
  - Test in stabilize mode (no GPS)
  - Gradual increase until responsive
  - Use blackbox logging for analysis

BENCH TEST EQUIPMENT
--------------------------------------------------------------------------------
  ‚òë Multimeter (voltage, continuity)
  ‚òë Tachometer (RPM)
  ‚òë Kitchen scale (thrust)
  ‚òë IR thermometer (temp)
  ‚òë Power meter (watts, current)
  ‚òë Laptop (FC configurator)
  ‚òë Safety glasses (protection)
  ‚òë Fire extinguisher (LiPo safety)

DATA LOGGING
--------------------------------------------------------------------------------
Create test log spreadsheet:

| Date | Test | Motor RPM | Thrust (g) | Current (A) | Temp (¬∞C) | Notes |
|------|------|-----------|------------|-------------|-----------|-------|
| 2/12 | Main | 7500      | 420        | 12.5        | 68        | Good  |
| 2/12 | Per1 | 6000      | 185        | 4.2         | 55        | OK    |
| ...  | ...  | ...       | ...        | ...         | ...       | ...   |

Track improvements iteration-by-iteration!

================================================================================
9. SOFTWARE TOOLS OVERVIEW
================================================================================

COMPLETE SIMULATION TOOLKIT
--------------------------------------------------------------------------------

CAD Design:
  ‚úì OpenSCAD (free, parametric) - Our current tool
  ‚úì FreeCAD (free, GUI-based)
  ‚úì Fusion 360 (free hobby license)

CFD Simulation:
  ‚úì SimScale (free, cloud, easiest)
  ‚úì OpenFOAM (free, powerful, Linux)
  ‚úì ANSYS Fluent (student, professional)

FEA Structural:
  ‚úì FreeCAD FEM (free)
  ‚úì Fusion 360 Simulation (free hobby)
  ‚úì ANSYS Mechanical (student)

Flight Dynamics:
  ‚úì Gazebo + ArduPilot SITL (free, realistic)
  ‚úì FlightGear (free, general aviation)
  ‚úì MATLAB/Simulink (paid, student discount)

Motor Matching:
  ‚úì eCalc.ch (free basic)
  ‚úì DriveCalc (free)

Data Analysis:
  ‚úì Excel / Google Sheets (data logging)
  ‚úì Python + Matplotlib (plotting)
  ‚úì Betaflight Blackbox Explorer (flight logs)

3D Printing:
  ‚úì Cura (free slicer)
  ‚úì PrusaSlicer (free, advanced)

================================================================================
10. STEP-BY-STEP SIMULATION WORKFLOW
================================================================================

COMPLETE DESIGN VALIDATION PROCESS
--------------------------------------------------------------------------------

WEEK 1: CAD + CFD
  Day 1-2: Design impeller in OpenSCAD
           Export to .stl
  
  Day 3-4: Set up SimScale account
           Upload model
           Create CFD simulation
  
  Day 5-7: Run simulations (multiple RPMs)
           Analyze results
           Iterate design

WEEK 2: STRUCTURAL + OPTIMIZATION
  Day 1-2: Import to FreeCAD
           Set up FEA simulation
           Check stress/deflection
  
  Day 3-4: Optimize design
           Reduce weight (topology optimization)
           Re-run FEA
  
  Day 5-7: Finalize CAD files
           Generate .stl files for printing

WEEK 3: MOTOR SELECTION + BATTERY
  Day 1-2: Use eCalc to match motor/prop
           Select battery
  
  Day 3-4: Predict flight time
           Calculate power budget
  
  Day 5-7: Order components (motors, ESCs, battery)

WEEK 4: 3D PRINTING
  Day 1-7: Print all parts
           Test fit
           Post-process (sanding, etc.)

WEEK 5: BENCH TESTING
  Day 1-2: Assemble test rig (thrust stand)
  
  Day 3-4: Individual motor tests
           Measure thrust/power
  
  Day 5-7: Validate CFD predictions
           Compare simulated vs. actual thrust

WEEK 6: ASSEMBLY + SOFTWARE
  Day 1-3: Full drone assembly
           Wiring, electronics
  
  Day 4-5: Flash firmware (INAV/ArduPilot)
           Calibrate sensors
  
  Day 6-7: Bench testing (motors, servos)

WEEK 7: FLIGHT SIMULATION
  Day 1-3: Set up Gazebo + SITL
           Create custom drone model
  
  Day 4-5: Simulate autonomous missions
           Tune PID controllers
  
  Day 6-7: Validate control algorithms

WEEK 8: FIRST FLIGHT!
  Day 1-2: Final pre-flight checks
           Range test, failsafe
  
  Day 3: First hover test (3-5 feet altitude)
         Manual stabilize mode
         
  Day 4-5: Tune PIDs (from flight logs)
  
  Day 6-7: Test autonomous features
           GPS hold, return-to-home

SIMULATION BEST PRACTICES
--------------------------------------------------------------------------------

1. Start Simple
   - Test one component at a time (impeller first)
   - Don't simulate full assembly immediately

2. Validate Early
   - Compare simulation to hand calculations
   - Check against known data (literature, forums)

3. Mesh Refinement Study
   - Run same simulation with 2x, 4x mesh density
   - If results change >5%, mesh too coarse

4. Document Everything
   - Save simulation settings
   - Export data to spreadsheets
   - Take screenshots of results

5. Iterate Quickly
   - Don't spend weeks on perfect CFD
   - Get 80% accuracy, then build & test
   - Real-world testing is ultimate validation

6. Learn from Failures
   - Simulation shows stall? ‚Üí Fix blade angle
   - FEA shows high stress? ‚Üí Add reinforcement
   - Flight sim shows instability? ‚Üí Tune PIDs

================================================================================
EXPECTED SIMULATION VS. REAL-WORLD ACCURACY
================================================================================

CFD (Thrust Prediction):
  Accuracy: ¬±10-20% (if mesh/settings correct)
  Why: Turbulence models approximate, 3D print roughness

FEA (Structural):
  Accuracy: ¬±5-15% (for stress)
  Why: Material properties vary (print settings, orientation)

Flight Dynamics:
  Accuracy: ¬±20-30% (qualitative trends good)
  Why: Aerodynamic coefficients estimated, wind unpredictable

Battery Life:
  Accuracy: ¬±15-25%
  Why: Depends on flying style, wind, temperature

‚úì Simulations excellent for: Relative comparisons (Design A vs. B)
‚úì Simulations okay for: Absolute predictions (with validation)
‚úì Always test real-world to confirm!

================================================================================
RESOURCES & LEARNING
================================================================================

CFD Tutorials:
  - SimScale Academy (free courses)
  - OpenFOAM User Guide (comprehensive)
  - YouTube: "Joshtheengineer" (CFD basics)

Flight Dynamics:
  - ArduPilot SITL Documentation
  - Gazebo Tutorials (robotics simulation)
  - Book: "Small Unmanned Aircraft" by Beard & McLain

Motor/Prop Data:
  - RCGroups forums (test data)
  - Oscar Liang blog (drone tutorials)
  - Rotorgeeks YouTube (motor reviews)

================================================================================
FINAL TIPS
================================================================================

1. Simulate BEFORE printing
   - Save 50% on filament costs
   - Avoid wasted time on bad designs

2. Start with proven designs
   - Modify existing props/impellers
   - Don't reinvent the wheel (unless learning)

3. Test incrementally
   - One motor at a time
   - Don't power everything at once initially

4. Safety first
   - Props are dangerous (safety glasses!)
   - LiPo fires are real (fire extinguisher nearby)
   - Test in open area away from people

5. Iterate, iterate, iterate
   - Version 1 will not be perfect
   - Each test teaches something
   - Document learnings for next build

================================================================================

Good luck with your simulations and testing! 
The best engineers test virtually before building physically.

Simulate smart, build once, fly awesome! üöÅüíª‚ú®

================================================================================
